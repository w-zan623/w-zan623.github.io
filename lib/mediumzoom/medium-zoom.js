// build time:Sun Aug 18 2019 00:01:09 GMT+0800 (GMT+08:00)
(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):e.mediumZoom=t()})(this,function(){"use strict";var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o){if(Object.prototype.hasOwnProperty.call(o,n)){e[n]=o[n]}}}return e};var t=function s(e){return e.tagName==="IMG"};var o=function f(e){return NodeList.prototype.isPrototypeOf(e)};var n=function v(e){return e&&e.nodeType===1};var r=function p(e){var t=e.currentSrc||e.src;return t.substr(-4).toLowerCase()===".svg"};var i=function g(e){try{if(Array.isArray(e)){return e.filter(t)}if(o(e)){return[].slice.call(e).filter(t)}if(n(e)){return[e].filter(t)}if(typeof e==="string"){return[].slice.call(document.querySelectorAll(e)).filter(t)}return[]}catch(r){throw new TypeError("The provided selector is invalid.\n"+"Expects a CSS selector, a Node element, a NodeList or an array.\n"+"See: https://github.com/francoischalifour/medium-zoom")}};var d=function h(e){var t=document.createElement("div");t.classList.add("medium-zoom-overlay");t.style.background=e;return t};var a=function z(e){var t=e.getBoundingClientRect(),o=t.top,n=t.left,r=t.width,i=t.height;var d=e.cloneNode();var a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;var m=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;d.removeAttribute("id");d.style.position="absolute";d.style.top=o+a+"px";d.style.left=n+m+"px";d.style.width=r+"px";d.style.height=i+"px";d.style.transform="";return d};var m=function y(t,o){var n=e({bubbles:false,cancelable:false,detail:undefined},o);if(typeof window.CustomEvent==="function"){return new CustomEvent(t,n)}var r=document.createEvent("CustomEvent");r.initCustomEvent(t,n.bubbles,n.cancelable,n.detail);return r};var l=function b(t){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var l=window.Promise||function I(e){function t(){}e(t,t)};var c=function q(e){var t=e.target;if(t===N){E();return}if(O.indexOf(t)===-1){return}w({target:t})};var u=function B(){if(A||!k.original){return}var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;if(Math.abs(S-e)>T.scrollOffset){setTimeout(E,150)}};var s=function M(e){if((e.keyCode||e.which)===27){E()}};var f=function P(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var o=t;if(t.background){N.style.background=t.background}if(t.container&&t.container instanceof Object){o.container=e({},T.container,t.container)}if(t.template){var r=n(t.template)?t.template:document.querySelector(t.template);o.template=r}T=e({},T,o);O.forEach(function(e){e.dispatchEvent(m("medium-zoom:update",{detail:{zoom:j}}))});return j};var v=function R(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return b(e({},T,t))};var p=function Y(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++){t[o]=arguments[o]}var n=t.reduce(function(e,t){return[].concat(e,i(t))},[]);n.filter(function(e){return O.indexOf(e)===-1}).forEach(function(e){O.push(e);e.classList.add("medium-zoom-image")});x.forEach(function(e){var t=e.type,o=e.listener,r=e.options;n.forEach(function(e){e.addEventListener(t,o,r)})});return j};var g=function W(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++){t[o]=arguments[o]}if(k.zoomed){E()}var n=t.length>0?t.reduce(function(e,t){return[].concat(e,i(t))},[]):O;n.forEach(function(e){e.classList.remove("medium-zoom-image");e.dispatchEvent(m("medium-zoom:detach",{detail:{zoom:j}}))});O=O.filter(function(e){return n.indexOf(e)===-1});return j};var h=function Z(e,t){var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};O.forEach(function(n){n.addEventListener("medium-zoom:"+e,t,o)});x.push({type:"medium-zoom:"+e,listener:t,options:o});return j};var z=function F(e,t){var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};O.forEach(function(n){n.removeEventListener("medium-zoom:"+e,t,o)});x=x.filter(function(o){return!(o.type==="medium-zoom:"+e&&o.listener.toString()===t.toString())});return j};var y=function G(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},o=t.target;var i=function d(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0};var o=void 0;var i=void 0;if(T.container){if(T.container instanceof Object){t=e({},t,T.container);o=t.width-t.left-t.right-T.margin*2;i=t.height-t.top-t.bottom-T.margin*2}else{var d=n(T.container)?T.container:document.querySelector(T.container);var a=d.getBoundingClientRect(),m=a.width,l=a.height,c=a.left,u=a.top;t=e({},t,{width:m,height:l,left:c,top:u})}}o=o||t.width-T.margin*2;i=i||t.height-T.margin*2;var s=k.zoomedHd||k.original;var f=r(s)?o:s.naturalWidth||o;var v=r(s)?i:s.naturalHeight||i;var p=s.getBoundingClientRect(),g=p.top,h=p.left,z=p.width,y=p.height;var b=Math.min(f,o)/z;var E=Math.min(v,i)/y;var w=Math.min(b,E);var L=(-h+(o-z)/2+T.margin+t.left)/w;var H=(-g+(i-y)/2+T.margin+t.top)/w;var C="scale("+w+") translate3d("+L+"px, "+H+"px, 0)";k.zoomed.style.transform=C;if(k.zoomedHd){k.zoomedHd.style.transform=C}};return new l(function(e){if(o&&O.indexOf(o)===-1){e(j);return}var t=function u(){A=false;k.zoomed.removeEventListener("transitionend",u);k.original.dispatchEvent(m("medium-zoom:opened",{detail:{zoom:j}}));e(j)};if(k.zoomed){e(j);return}if(o){k.original=o}else if(O.length>0){var r=O;k.original=r[0]}else{e(j);return}k.original.dispatchEvent(m("medium-zoom:open",{detail:{zoom:j}}));S=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;A=true;k.zoomed=a(k.original);document.body.appendChild(N);if(T.template){var d=n(T.template)?T.template:document.querySelector(T.template);k.template=document.createElement("div");k.template.appendChild(d.content.cloneNode(true));document.body.appendChild(k.template)}document.body.appendChild(k.zoomed);window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")});k.original.classList.add("medium-zoom-image--hidden");k.zoomed.classList.add("medium-zoom-image--opened");k.zoomed.addEventListener("click",E);k.zoomed.addEventListener("transitionend",t);if(k.original.getAttribute("data-zoom-src")){k.zoomedHd=k.zoomed.cloneNode();k.zoomedHd.removeAttribute("srcset");k.zoomedHd.removeAttribute("sizes");k.zoomedHd.src=k.zoomed.getAttribute("data-zoom-src");k.zoomedHd.onerror=function(){clearInterval(l);console.warn("Unable to reach the zoom image target "+k.zoomedHd.src);k.zoomedHd=null;i()};var l=setInterval(function(){if(k.zoomedHd.complete){clearInterval(l);k.zoomedHd.classList.add("medium-zoom-image--opened");k.zoomedHd.addEventListener("click",E);document.body.appendChild(k.zoomedHd);i()}},10)}else if(k.original.hasAttribute("srcset")){k.zoomedHd=k.zoomed.cloneNode();k.zoomedHd.removeAttribute("sizes");var c=k.zoomedHd.addEventListener("load",function(){k.zoomedHd.removeEventListener("load",c);k.zoomedHd.classList.add("medium-zoom-image--opened");k.zoomedHd.addEventListener("click",E);document.body.appendChild(k.zoomedHd);i()})}else{i()}})};var E=function U(){return new l(function(e){if(A||!k.original){e(j);return}var t=function o(){k.original.classList.remove("medium-zoom-image--hidden");document.body.removeChild(k.zoomed);if(k.zoomedHd){document.body.removeChild(k.zoomedHd)}document.body.removeChild(N);k.zoomed.classList.remove("medium-zoom-image--opened");if(k.template){document.body.removeChild(k.template)}A=false;k.zoomed.removeEventListener("transitionend",o);k.original.dispatchEvent(m("medium-zoom:closed",{detail:{zoom:j}}));k.original=null;k.zoomed=null;k.zoomedHd=null;k.template=null;e(j)};A=true;document.body.classList.remove("medium-zoom--opened");k.zoomed.style.transform="";if(k.zoomedHd){k.zoomedHd.style.transform=""}if(k.template){k.template.style.transition="opacity 150ms";k.template.style.opacity=0}k.original.dispatchEvent(m("medium-zoom:close",{detail:{zoom:j}}));k.zoomed.addEventListener("transitionend",t)})};var w=function X(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.target;if(k.original){return E()}return y({target:t})};var L=function D(){return T};var H=function J(){return O};var C=function K(){return k.original};var O=[];var x=[];var A=false;var S=0;var T=o;var k={original:null,zoomed:null,zoomedHd:null,template:null};if(Object.prototype.toString.call(t)==="[object Object]"){T=t}else if(t||typeof t==="string"){p(t)}T=e({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},T);var N=d(T.background);document.addEventListener("click",c);document.addEventListener("keyup",s);document.addEventListener("scroll",u);window.addEventListener("resize",E);var j={open:y,close:E,toggle:w,update:f,clone:v,attach:p,detach:g,on:h,off:z,getOptions:L,getImages:H,getZoomedImage:C};return j};function c(e,t){if(t===void 0)t={};var o=t.insertAt;if(!e||typeof document==="undefined"){return}var n=document.head||document.getElementsByTagName("head")[0];var r=document.createElement("style");r.type="text/css";if(o==="top"){if(n.firstChild){n.insertBefore(r,n.firstChild)}else{n.appendChild(r)}}else{n.appendChild(r)}if(r.styleSheet){r.styleSheet.cssText=e}else{r.appendChild(document.createTextNode(e))}}var u=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";c(u);return l});
//rebuild by neat 